<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Musculoskeletal Evaluation - DrTroy CE</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        @page { size: letter; margin: 0.75in; @bottom-center { content: counter(page); font-size: 10pt; color: #666; } }
        * { box-sizing: border-box; }

        /* CSS Variables */
        :root {
            --navy: #1a365d;
            --navy-light: #2c5282;
            --gold: #059669;
            --gold-light: #10b981;
            --gray-50: #f7fafc;
            --gray-100: #edf2f7;
            --gray-200: #e5e7eb;
            --gray-600: #4a5568;
            --gray-800: #2d3748;
            --gray-900: #111827;
        }

        /* Base styles */
        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            font-size: 16px;
            line-height: 1.7;
            color: #333;
            margin: 0;
            padding: 0;
            background: #f5f5f5;
        }

        /* Course Header Styles */
        .course-header {
            background: #ffffff;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 3px solid var(--gold);
        }

        .course-header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo img {
            height: 60px;
            width: auto;
            max-width: 300px;
        }

        .course-nav {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .course-nav a {
            color: var(--gray-600);
            text-decoration: none;
            font-weight: 500;
            font-size: 14px;
            transition: color 0.2s;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .course-nav a:hover {
            color: var(--navy);
        }

        .logout-btn {
            background: var(--gold);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .logout-btn:hover {
            background: var(--gold-light);
            transform: translateY(-2px);
        }

        /* Mobile Header */
        @media (max-width: 768px) {
            .course-header-container {
                flex-direction: column;
                padding: 1rem;
                gap: 1rem;
            }

            .logo img {
                height: 50px;
            }

            .course-nav {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            .course-nav a {
                font-size: 13px;
            }

            .logout-btn {
                font-size: 13px;
                padding: 0.4rem 0.8rem;
            }
        }

        /* Content container - responsive */
        .content-wrapper {
            max-width: 800px;
            margin: 2rem auto;
            background: white;
            padding: 40px 60px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px;
        }

        /* Progress Bar Styles */
        .progress-container {
            background: #fff;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #059669;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .progress-title {
            font-size: 18px;
            font-weight: bold;
            color: #1a365d;
        }

        .save-status {
            font-size: 12px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #059669, #0ea570);
            transition: width 0.3s ease;
        }

        .progress-text {
            margin-top: 10px;
            font-size: 14px;
            color: #666;
        }

        /* Module Container Styles */
        .module-container {
            margin: 20px 0;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }

        .module-header {
            background: linear-gradient(135deg, #1a365d, #2d3748);
            color: white;
            padding: 20px;
            cursor: pointer;
            user-select: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s ease;
        }

        .module-header:hover {
            background: linear-gradient(135deg, #2d3748, #1a365d);
        }

        .module-header.completed {
            background: linear-gradient(135deg, #059669, #0ea570);
        }

        .module-header.locked {
            background: #cbd5e0;
            color: #718096;
            cursor: not-allowed;
        }

        .module-title {
            font-size: 18px;
            font-weight: bold;
        }

        .module-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .module-icon {
            font-size: 20px;
        }

        .module-content {
            padding: 30px;
            display: none;
            background: white;
        }

        .module-content.active {
            display: block;
        }

        /* Knowledge Check Styles */
        .knowledge-check {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 25px;
            margin: 30px 0;
        }

        .knowledge-check h3 {
            color: #1a365d;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .question {
            font-size: 16px;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answer-options {
            margin: 20px 0;
        }

        .answer-option {
            display: flex;
            align-items: flex-start;
            margin: 10px 0;
            padding: 12px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .answer-option:hover {
            background: #f7fafc;
            border-color: #059669;
        }

        .answer-option input[type="radio"] {
            margin-right: 12px;
            margin-top: 3px;
        }

        .answer-option.correct {
            background: #f0fff4;
            border-color: #059669;
            color: #065f46;
        }

        .answer-option.incorrect {
            background: #fef2f2;
            border-color: #dc2626;
            color: #991b1b;
        }

        .check-answer-btn {
            background: #059669;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: background 0.2s ease;
            margin-right: 10px;
        }

        .check-answer-btn:hover {
            background: #047857;
        }

        .check-answer-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            font-weight: bold;
            display: none;
        }

        .feedback.correct {
            background: #f0fff4;
            border: 1px solid #059669;
            color: #065f46;
            display: block;
        }

        .feedback.incorrect {
            background: #fef2f2;
            border: 1px solid #dc2626;
            color: #991b1b;
            display: block;
        }

        .continue-btn {
            background: #059669;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            margin-top: 15px;
            display: none;
        }

        .continue-btn.show {
            display: inline-block;
        }

        /* Save Button Styles */
        .save-progress-btn {
            background: #1a365d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .save-progress-btn:hover {
            background: #2d3748;
        }

        .clear-progress-btn {
            background: #dc2626;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .clear-progress-btn:hover {
            background: #b91c1c;
        }

        /* Confirmation Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .modal-title {
            font-size: 20px;
            font-weight: bold;
            color: #1a365d;
            margin-bottom: 15px;
        }

        .modal-text {
            color: #4a5568;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .modal-btn.confirm {
            background: #dc2626;
            color: white;
        }

        .modal-btn.confirm:hover {
            background: #b91c1c;
        }

        .modal-btn.cancel {
            background: #e5e7eb;
            color: #374151;
        }

        .modal-btn.cancel:hover {
            background: #d1d5db;
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #059669;
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Mobile responsive */
        @media (max-width: 900px) {
            .content-wrapper {
                padding: 30px 40px;
                margin: 0 20px;
            }
            .progress-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }

        @media (max-width: 600px) {
            .content-wrapper {
                padding: 20px;
                margin: 0 10px;
            }
            body {
                font-size: 15px;
                line-height: 1.6;
            }
            .module-title {
                font-size: 16px;
            }
            .module-status {
                gap: 5px;
            }
            .module-icon {
                font-size: 16px;
            }
            .save-status > div {
                flex-direction: column;
                gap: 8px !important;
            }
            .save-progress-btn, .clear-progress-btn {
                font-size: 12px;
                padding: 8px 16px;
            }
            .modal-content {
                padding: 20px;
                margin: 20px;
            }
            .modal-buttons {
                flex-direction: column;
                gap: 10px;
            }
            .figure-box img {
                max-height: 500px !important; /* Ensure larger images on mobile for better text readability */
            }
        }

        /* Original course styles */
        .cover-page {
            text-align: center;
            padding: 60px 30px;
            background: linear-gradient(135deg, #1a365d, #2d3748);
            color: white;
            margin-bottom: 30px;
            border-radius: 8px;
        }

        .cover-page img {
            max-width: 250px;
            height: auto;
            margin: 0 auto 30px auto;
            display: block;
        }

        .cover-page h1 {
            font-size: 28px;
            margin: 20px 0;
            color: white;
        }

        .cover-page .subtitle {
            font-size: 16px;
            opacity: 0.9;
            margin: 10px 0;
        }

        /* Standard typography */
        h1 {
            color: #1a365d;
            font-size: 24px;
            margin: 30px 0 20px 0;
            font-weight: bold;
        }

        h2 {
            color: #1a365d;
            font-size: 20px;
            margin: 25px 0 15px 0;
            font-weight: bold;
        }

        h3 {
            color: #2d3748;
            font-size: 18px;
            margin: 20px 0 10px 0;
            font-weight: bold;
        }

        p {
            margin: 15px 0;
            text-align: justify;
        }

        ul, ol {
            margin: 15px 0;
            padding-left: 25px;
        }

        li {
            margin: 8px 0;
        }

        /* Table styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 15px;
        }

        th, td {
            border: 1px solid #059669;
            padding: 12px;
            text-align: left;
            vertical-align: top;
        }

        th {
            background-color: #059669;
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        /* Special boxes */
        .figure-box {
            border: 2px solid #059669;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
            background: #f8fbff;
            text-align: center;
        }

        .figure-number {
            display: block;
            font-weight: bold;
            color: #1a365d;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .figure-caption {
            margin-top: 15px;
            font-size: 14px;
            color: #4a5568;
            font-style: italic;
            line-height: 1.5;
            text-align: left;
        }

        .figure-box img {
            max-width: 100%;
            height: auto;
            max-height: 700px; /* Increased from 500px for better text readability */
            border-radius: 4px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .figure-box img:hover {
            transform: scale(1.02);
        }

        /* Zoom overlay for images */
        .image-zoom-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            cursor: pointer;
        }

        .image-zoom-overlay.show {
            display: flex;
        }

        .image-zoom-overlay img {
            max-width: 95%;
            max-height: 95%;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .zoom-hint {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .image-click-hint {
            font-size: 12px;
            color: #666;
            font-style: italic;
            margin-top: 8px;
            text-align: center;
        }

        .test-box {
            background-color: #e8f4f8;
            border-left: 4px solid #059669;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }

        .clinical-pearl {
            background-color: #fff8e1;
            border: 2px solid #f59e0b;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
        }

        .caution-box {
            background-color: #fef2f2;
            border: 2px solid #dc2626;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
        }

        .important-box {
            background-color: #f0f9ff;
            border: 2px solid #0ea5e9;
            padding: 20px;
            margin: 25px 0;
            border-radius: 8px;
        }

        .divider {
            text-align: center;
            font-size: 24px;
            color: #059669;
            margin: 40px 0;
            font-weight: bold;
        }

        /* Hide original module headers since we're using the new collapsible ones */
        .original-module-header {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Header Navigation -->
    <header class="course-header">
        <div class="course-header-container">
            <div class="logo">
                <a href="../index.html">
                    <img src="../images/drtroy_logo_new.jpg" alt="DrTroy.com - Continuing Education">
                </a>
            </div>
            <nav class="course-nav">
                <a href="../index.html">Home</a>
                <a href="../my-account.html">My Account</a>
                <a href="../courses.html">Courses</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </nav>
        </div>
    </header>

    <div class="content-wrapper">
        <!-- Course Header -->
        <div class="cover-page">
            <img src="images/drtroy_logo_new.jpg" alt="DrTroy Continuing Education">
            <h1>Comprehensive Musculoskeletal Evaluation</h1>
            <div class="subtitle">Evidence-Based Special Tests and Clinical Reasoning</div>
            <div class="subtitle">PT-MSK-001 | 3.0 CCUs | 180 Minutes</div>
        </div>

        <!-- Progress Tracking -->
        <div class="progress-container">
            <div class="progress-header">
                <div class="progress-title">Course Progress</div>
                <div class="save-status">
                    <span id="saveStatus">Never saved</span>
                    <div style="display: flex; gap: 10px;">
                        <button class="save-progress-btn" onclick="saveProgress()">
                            üíæ Save Progress
                        </button>
                        <button class="clear-progress-btn" onclick="confirmClearProgress()">
                            üóëÔ∏è Clear Progress
                        </button>
                    </div>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-text" id="progressText">Ready to begin ‚Ä¢ 0 of 12 modules completed</div>
        </div>

        <!-- Course Introduction -->
        <div style="padding: 20px; background: #f7fafc; border-radius: 8px; margin-bottom: 30px;">
            <h2>üöÄ Interactive Course Demo - First 3 Modules</h2>
            <p>Experience the new progressive learning system! This demo includes the first 3 modules with full functionality.</p>
            <ul>
                <li><strong>Progressive Unlocking:</strong> Complete each module to unlock the next</li>
                <li><strong>Auto-Save:</strong> Your progress is automatically saved every 5 minutes</li>
                <li><strong>Resume Anytime:</strong> Come back later and continue where you left off</li>
                <li><strong>Knowledge Checks:</strong> One question per module reinforces key concepts</li>
            </ul>
            <div style="background: #e8f4f8; padding: 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #059669;">
                <strong>üéØ Demo Modules:</strong> Introduction to MSK Evaluation, Cervical Spine, Thoracic Spine<br>
                <strong>üìö Full Course:</strong> All 12 modules + final assessment coming soon
            </div>
        </div>

        <!-- Module 1 -->
        <div class="module-container" id="module-1">
            <div class="module-header" onclick="toggleModule(1)">
                <div class="module-title">Module 1: Introduction to MSK Evaluation (18 min)</div>
                <div class="module-status">
                    <span class="module-icon">üîì</span>
                    <span>Ready to Start</span>
                </div>
            </div>
            <div class="module-content" id="content-1">
                <h2>1.1 Examination Model</h2>
                
                <div class="figure-box">
                    <span class="figure-number">FIGURE 1: Examination Sequence Flowchart (SOAP Format)</span>
                    <img src="images/figure_1_examination_sequence.svg" alt="Flowchart showing SOAP examination sequence" onclick="zoomImage(this)">
                    <div class="figure-caption">Illustration showing the systematic examination process: Subjective (patient history, pain assessment, functional limitations), Objective (observation, ROM, special tests, palpation), Assessment (diagnosis, impairments), and Plan (interventions, goals). Arrows indicate the cyclical nature of reassessment.</div>
                    <div class="image-click-hint">üí° Click image to zoom</div>
                </div>

                <p>The systematic examination follows four phases: Subjective, Objective, Assessment, and Plan (SOAP).</p>

                <h3>Subjective Examination Components</h3>
                <ul>
                    <li>Chief complaint and history of present illness</li>
                    <li>Pain assessment (location, quality, intensity, aggravating/relieving factors)</li>
                    <li>Functional limitations and patient goals</li>
                    <li>Medical history, medications, social history</li>
                </ul>

                <h3>Objective Examination Components</h3>
                <ul>
                    <li>Observation (posture, gait, functional movements)</li>
                    <li>Active and passive range of motion</li>
                    <li>Resisted isometric testing</li>
                    <li>Special tests</li>
                    <li>Palpation</li>
                    <li>Neurological examination when indicated</li>
                </ul>

                <h2>1.2 Red Flags Screening</h2>

                <table>
                    <tr><th>Red Flag</th><th>Potential Pathology</th><th>Action</th></tr>
                    <tr><td>Bowel/bladder dysfunction with back pain</td><td>Cauda equina syndrome</td><td>EMERGENCY ED referral</td></tr>
                    <tr><td>Saddle anesthesia</td><td>Cauda equina syndrome</td><td>EMERGENCY ED referral</td></tr>
                    <tr><td>Progressive neurological deficits</td><td>Spinal cord compression</td><td>Urgent referral</td></tr>
                    <tr><td>Unexplained weight loss >10%</td><td>Malignancy</td><td>Immediate referral</td></tr>
                    <tr><td>Night pain unrelieved by position</td><td>Tumor, infection, fracture</td><td>Immediate imaging</td></tr>
                    <tr><td>Fever with musculoskeletal pain</td><td>Infection</td><td>Urgent evaluation</td></tr>
                    <tr><td>History of cancer with new pain</td><td>Metastatic disease</td><td>Immediate imaging</td></tr>
                    <tr><td>Trauma age >65</td><td>Fracture</td><td>Immediate imaging</td></tr>
                </table>

                <div class="figure-box">
                    <span class="figure-number">FIGURE 2: Red Flags Decision Tree</span>
                    <img src="images/figure_2_red_flags.svg" alt="Decision tree for red flag screening" onclick="zoomImage(this)">
                    <div class="figure-caption">Flowchart diagram showing the decision-making process for red flag screening. Starting with initial patient presentation, branches lead to various red flag categories (neurological, systemic, oncological, traumatic) with corresponding actions: emergency referral, urgent imaging, or continue with standard examination.</div>
                    <div class="image-click-hint">üí° Click image to zoom</div>
                </div>

                <div class="caution-box">
                    <strong>Documentation:</strong> Always document red flag screening: "Patient screened for red flags including [list]. No red flags identified."
                </div>

                <h2>1.3 Pain Mechanisms</h2>

                <div class="figure-box">
                    <span class="figure-number">FIGURE 3: Pain Mechanism Classification Diagram</span>
                    <img src="images/figure_3_pain_mechanism.svg" alt="Classification diagram of pain mechanisms" onclick="zoomImage(this)">
                    <div class="figure-caption">Classification diagram illustrating the three primary pain mechanisms in physical therapy evaluation: nociceptive pain (tissue damage, localized, mechanical pattern), neuropathic pain (nervous system lesion, dermatomal distribution, burning/shooting quality), and nociplastic pain (altered central processing, widespread distribution, disproportionate to tissue damage). Understanding these mechanisms guides appropriate examination and intervention strategies.</div>
                    <div class="image-click-hint">üí° Click image to zoom</div>
                </div>

                <h3>Nociceptive Pain</h3>
                <p>From actual tissue damage. Localized, mechanical pattern, responds to treatment.</p>

                <h3>Neuropathic Pain</h3>
                <p>From nervous system lesion. Burning/shooting, dermatomal distribution, night symptoms.</p>

                <h3>Nociplastic Pain</h3>
                <p>Altered pain processing. Widespread, disproportionate, psychosocial factors.</p>

                <div class="figure-box">
                    <span class="figure-number">FIGURE 4: Tissue Healing Phases Timeline</span>
                    <img src="images/figure_4_tissue_healing.svg" alt="Timeline of tissue healing phases" onclick="zoomImage(this)">
                    <div class="figure-caption">Timeline illustrating the three phases of tissue healing: Inflammatory phase (0-6 days), Proliferative phase (3-21 days), and Remodeling phase (21 days to 2+ years). Each phase has distinct cellular activities, clinical presentations, and treatment considerations that guide physical therapy intervention timing and approach.</div>
                    <div class="image-click-hint">üí° Click image to zoom</div>
                </div>

                <!-- Knowledge Check for Module 1 -->
                <div class="knowledge-check">
                    <h3>üß† Knowledge Check - Module 1</h3>
                    <div class="question">
                        A 35-year-old patient presents with low back pain and reports new onset bowel incontinence. What is the MOST appropriate immediate action?
                    </div>
                    <div class="answer-options">
                        <label class="answer-option">
                            <input type="radio" name="q1" value="A">
                            A) Begin lumbar spine examination with special tests
                        </label>
                        <label class="answer-option">
                            <input type="radio" name="q1" value="B">
                            B) Apply heat and electrical stimulation
                        </label>
                        <label class="answer-option">
                            <input type="radio" name="q1" value="C">
                            C) Immediately refer to emergency department for potential cauda equina syndrome
                        </label>
                        <label class="answer-option">
                            <input type="radio" name="q1" value="D">
                            D) Schedule a follow-up appointment in 2 weeks
                        </label>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer(1, 'C')">Check Answer</button>
                    <div class="feedback" id="feedback-1"></div>
                    <button class="continue-btn" id="continue-1" onclick="unlockNextModule(2)">Continue to Module 2</button>
                </div>
            </div>
        </div>

        <!-- Module 2 -->
        <div class="module-container" id="module-2">
            <div class="module-header locked" onclick="toggleModule(2)">
                <div class="module-title">Module 2: Cervical Spine (15 min)</div>
                <div class="module-status">
                    <span class="module-icon">üîí</span>
                    <span>Complete Module 1</span>
                </div>
            </div>
            <div class="module-content" id="content-2">
                <h2>2.1 Anatomy</h2>

                <div class="figure-box">
                    <span class="figure-number">FIGURE 5: Cervical Spine Anatomy ‚Äî Gray's Anatomy Plates (1918)</span>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 1rem 0;">
                        <div style="text-align: center;">
                            <img src="images/gray86_atlas.png" alt="Atlas (C1)" style="width: 100%; max-width: 250px; height: auto; border: 1px solid #ddd; cursor: pointer;" onclick="zoomImage(this)">
                            <div style="font-size: 0.85rem; margin-top: 0.5rem;"><strong>Plate 86:</strong> Atlas (C1)</div>
                        </div>
                        <div style="text-align: center;">
                            <img src="images/gray87_axis_above.png" onclick="zoomImage(this)" style="cursor: pointer;" alt="Axis (C2) from above" style="width: 100%; max-width: 250px; height: auto; border: 1px solid #ddd;">
                            <div style="font-size: 0.85rem; margin-top: 0.5rem;"><strong>Plate 87:</strong> Axis (C2) ‚Äî superior view</div>
                        </div>
                        <div style="text-align: center;">
                            <img src="images/gray88_axis_side.png" alt="Axis (C2) from side" style="width: 100%; max-width: 250px; height: auto; border: 1px solid #ddd;">
                            <div style="font-size: 0.85rem; margin-top: 0.5rem;"><strong>Plate 88:</strong> Axis (C2) ‚Äî lateral view</div>
                        </div>
                        <div style="text-align: center;">
                            <img src="images/gray85_cervical_vertebra_typical.png" alt="Typical cervical vertebra" style="width: 100%; max-width: 250px; height: auto; border: 1px solid #ddd;">
                            <div style="font-size: 0.85rem; margin-top: 0.5rem;"><strong>Plate 85:</strong> Typical vertebra (C3-C6)</div>
                        </div>
                        <div style="text-align: center;">
                            <img src="images/gray89_vertebra_prominens.png" alt="Vertebra prominens (C7)" style="width: 100%; max-width: 250px; height: auto; border: 1px solid #ddd;">
                            <div style="font-size: 0.85rem; margin-top: 0.5rem;"><strong>Plate 89:</strong> Vertebra prominens (C7)</div>
                        </div>
                    </div>
                    <div class="figure-caption">Classic anatomical illustrations from Henry Gray's <em>Anatomy of the Human Body</em>, 20th edition (1918). Plate 86: Atlas (C1) ‚Äî supports the skull; Plate 87-88: Axis (C2) ‚Äî features the dens for rotational movement; Plate 85: Typical cervical vertebra (C3-C6); Plate 89: Vertebra prominens (C7) ‚Äî long spinous process landmark. Public domain.</div>
                    <div class="image-click-hint">üí° Click any image to zoom for better text readability</div>
                </div>

                <h3>Upper Cervical (C0-C2)</h3>
                <ul>
                    <li>C0-C1: 50% of flexion/extension</li>
                    <li>C1-C2: 50% of rotation via dens pivot</li>
                    <li>Vertebral arteries vulnerable to manipulation</li>
                </ul>

                <h3>Lower Cervical (C3-C7)</h3>
                <ul>
                    <li>Discs C2-C7</li>
                    <li>Uncovertebral joints guide movement</li>
                    <li>Facet joints at 45 degrees</li>
                </ul>

                <h2>2.2 Cervical ROM</h2>
                <table>
                    <tr><th>Movement</th><th>Normal</th><th>Functional</th></tr>
                    <tr><td>Flexion</td><td>0-80</td><td>0-45</td></tr>
                    <tr><td>Extension</td><td>0-70</td><td>0-45</td></tr>
                    <tr><td>Side bend</td><td>0-45</td><td>0-30</td></tr>
                    <tr><td>Rotation</td><td>0-80</td><td>0-60</td></tr>
                </table>

                <h2>2.3 Special Tests</h2>

                <div class="test-box">
                    <strong>Spurling's Test (Foraminal Compression)</strong><br>
                    Purpose: Cervical nerve root compression<br>
                    Technique: Extend, laterally flex, rotate toward symptomatic side; apply axial compression<br>
                    Positive: Radicular arm symptoms<br>
                    Accuracy: Sens 30%, Spec 93% (highly specific)<br>
                    Contraindications: Severe osteoporosis, fracture, vertebral artery insufficiency
                </div>

                <div class="figure-box">
                    <span class="figure-number">FIGURE 6: Spurling's Test Illustration</span>
                    <img src="images/figure_7_spurling.svg?v=3" alt="Spurling's test illustration" onclick="zoomImage(this)">
                    <div class="figure-caption">Illustration showing examiner performing Spurling's test on seated patient. Patient's neck is extended, laterally flexed, and rotated toward the symptomatic side while examiner applies gentle axial compression through the head. Arrows indicate direction of movement and force application.</div>
                    <div class="image-click-hint">üí° Click image to zoom</div>
                </div>

                <div class="test-box">
                    <strong>Distraction Test</strong><br>
                    Purpose: Confirm radiculopathy by relieving compression<br>
                    Technique: Supine; gently lift head to distract spine<br>
                    Positive: Reduction of radicular symptoms<br>
                    Accuracy: Sens 44%, Spec 90%
                </div>

                <div class="figure-box">
                    <span class="figure-number">FIGURE 7: Cervical Distraction Test Illustration</span>
                    <img src="images/figure_distraction_test.svg" alt="Cervical distraction test illustration" onclick="zoomImage(this)">
                    <div class="figure-caption">Illustration showing therapist performing cervical distraction test. One hand supports the occiput while the other hand controls the chin/jaw. Upward traction opens intervertebral foramina, reducing nerve root compression and relieving radicular symptoms.</div>
                    <div class="image-click-hint">üí° Click image to zoom</div>
                </div>

                <div class="test-box">
                    <strong>Vertebral Artery Test</strong><br>
                    Purpose: Screen before manipulation<br>
                    Technique: Supine; passively extend, rotate, side-bend; hold 10-30 seconds<br>
                    Positive: Nystagmus, dizziness, nausea, visual changes, dysarthria<br>
                    Note: Poor sensitivity but standard precaution
                </div>

                <h2>2.4 Cervical Radiculopathy by Level</h2>
                <table>
                    <tr><th>Level</th><th>Motor</th><th>Sensory</th><th>Reflex</th></tr>
                    <tr><td>C5</td><td>Shoulder abd, elbow flex</td><td>Lateral arm</td><td>Biceps</td></tr>
                    <tr><td>C6</td><td>Wrist ext, elbow flex</td><td>Lateral forearm, thumb</td><td>Brachioradialis</td></tr>
                    <tr><td>C7</td><td>Elbow ext, wrist flex</td><td>Posterior arm, middle finger</td><td>Triceps</td></tr>
                    <tr><td>C8</td><td>Finger flex, hand intrinsics</td><td>Ulnar forearm, little finger</td><td>None</td></tr>
                    <tr><td>T1</td><td>Hand intrinsics</td><td>Medial arm</td><td>None</td></tr>
                </table>

                <div class="figure-box">
                    <span class="figure-number">FIGURE 8: Upper Extremity Dermatomes (C5-T1)</span>
                    <img src="images/figure_8_gray_dermatomes_anterior.png" alt="Gray's Anatomy upper extremity dermatome map">
                    <div class="figure-caption">Gray's Anatomy Plate 812: Segmental distribution of the cutaneous nerves of the right upper extremity, anterior view. Public domain image from Gray's Anatomy, 20th edition (1918). Shows dermatomal distribution of C5-T1 nerve roots.</div>
                </div>

                <!-- Knowledge Check for Module 2 -->
                <div class="knowledge-check">
                    <h3>üß† Knowledge Check - Module 2</h3>
                    <div class="question">
                        Spurling's test is positive in a patient with neck pain. What does this indicate, and what is the diagnostic significance?
                    </div>
                    <div class="answer-options">
                        <label class="answer-option">
                            <input type="radio" name="q2" value="A">
                            A) Vertebral artery insufficiency; highly sensitive test
                        </label>
                        <label class="answer-option">
                            <input type="radio" name="q2" value="B">
                            B) Cervical nerve root compression; highly specific test (93% specificity)
                        </label>
                        <label class="answer-option">
                            <input type="radio" name="q2" value="C">
                            C) Upper cervical instability; moderately sensitive and specific
                        </label>
                        <label class="answer-option">
                            <input type="radio" name="q2" value="D">
                            D) Cervical muscle strain; highly sensitive but not specific
                        </label>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer(2, 'B')">Check Answer</button>
                    <div class="feedback" id="feedback-2"></div>
                    <button class="continue-btn" id="continue-2" onclick="unlockNextModule(3)">Continue to Module 3</button>
                </div>
            </div>
        </div>

        <!-- Module 3 -->
        <div class="module-container" id="module-3">
            <div class="module-header locked" onclick="toggleModule(3)">
                <div class="module-title">Module 3: Thoracic Spine (12 min)</div>
                <div class="module-status">
                    <span class="module-icon">üîí</span>
                    <span>Complete Module 2</span>
                </div>
            </div>
            <div class="module-content" id="content-3">
                <h2>3.1 Anatomy</h2>

                <div class="figure-box">
                    <span class="figure-number">FIGURE 9: Thoracic Spine Anatomy ‚Äî Gray's Anatomy Plates (1918)</span>
                    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; margin: 1rem 0;">
                        <div style="text-align: center; flex: 0 1 auto;">
                            <img src="images/gray90_thoracic_vertebra.png" alt="Thoracic vertebra" style="width: 100%; max-width: 400px; height: auto; border: 1px solid #ddd;">
                            <div style="font-size: 0.85rem; margin-top: 0.5rem;"><strong>Plate 90:</strong> Thoracic vertebra</div>
                        </div>
                        <div style="text-align: center; flex: 0 1 auto;">
                            <img src="images/gray91_peculiar_thoracic.png" alt="Peculiar thoracic vertebrae" style="width: 100%; max-width: 400px; height: auto; border: 1px solid #ddd;">
                            <div style="font-size: 0.85rem; margin-top: 0.5rem;"><strong>Plate 91:</strong> Peculiar thoracic vertebrae</div>
                        </div>
                    </div>
                    <div class="figure-caption">Classic anatomical illustrations from Henry Gray's <em>Anatomy of the Human Body</em>, 20th edition (1918). Plate 90: Typical thoracic vertebra with costal facets; Plate 91: Comparative view showing variations at different thoracic levels (T1 transitional, T10-T12 lumbar-like characteristics). Public domain.</div>
                </div>

                <ul>
                    <li>Rib articulations T1-T12</li>
                    <li>Kyphosis 20-45 degrees normal</li>
                    <li>Facet joints frontal plane = more rotation, less flex/ext</li>
                    <li>Narrowest spinal canal region</li>
                </ul>

                <h2>3.2 Thoracic ROM</h2>
                <table>
                    <tr><th>Movement</th><th>Range</th></tr>
                    <tr><td>Flexion</td><td>20-45</td></tr>
                    <tr><td>Extension</td><td>15-25</td></tr>
                    <tr><td>Side bend</td><td>20-40 each</td></tr>
                    <tr><td>Rotation</td><td>30-35 each (greatest in spine)</td></tr>
                </table>

                <h2>3.3 Special Tests</h2>

                <div class="test-box">
                    <strong>Thoracic Rotation Test</strong><br>
                    Purpose: Assess thoracic mobility<br>
                    Technique: Seated, arms crossed; rotate trunk while stabilizing pelvis<br>
                    Significance: Restriction indicates hypomobility
                </div>

                <div class="test-box">
                    <strong>First Rib Mobility Test</strong><br>
                    Purpose: Assess first rib hypomobility (common in TOS)<br>
                    Technique: Supine; palpate first rib anterolateral to T1; assess mobility with respiration
                </div>

                <div class="caution-box">
                    <strong>Thoracic Differential Diagnosis:</strong> Thoracic pain can mimic cardiac, pulmonary, GI pathology. Screen for chest pressure, SOB, nausea, fever.
                </div>

                <!-- Knowledge Check for Module 3 -->
                <div class="knowledge-check">
                    <h3>üß† Knowledge Check - Module 3</h3>
                    <div class="question">
                        Which movement has the greatest range of motion in the thoracic spine compared to other spinal regions?
                    </div>
                    <div class="answer-options">
                        <label class="answer-option">
                            <input type="radio" name="q3" value="A">
                            A) Flexion (20-45 degrees)
                        </label>
                        <label class="answer-option">
                            <input type="radio" name="q3" value="B">
                            B) Extension (15-25 degrees)
                        </label>
                        <label class="answer-option">
                            <input type="radio" name="q3" value="C">
                            C) Rotation (30-35 degrees each direction)
                        </label>
                        <label class="answer-option">
                            <input type="radio" name="q3" value="D">
                            D) Side bending (20-40 degrees each direction)
                        </label>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer(3, 'C')">Check Answer</button>
                    <div class="feedback" id="feedback-3"></div>
                    <button class="continue-btn" id="continue-3" onclick="showMoreModulesMessage()">Continue to Module 4</button>
                </div>
            </div>
        </div>

        <!-- Continue with remaining modules... -->
        <div style="text-align: center; padding: 40px; color: #666; border: 2px dashed #e2e8f0; border-radius: 8px; margin: 30px 0;">
            <h3>üöß More Modules Coming Soon...</h3>
            <p>The progressive course system is ready! I'm now adding the remaining 9 modules with knowledge checks.</p>
            <p><strong>Next Up:</strong> Modules 4-12 (Lumbar Spine, SI Joint, Shoulder, Elbow, Wrist & Hand, Hip, Knee, Ankle & Foot, Clinical Reasoning)</p>
            <p style="margin-top: 20px; font-size: 14px;">
                <strong>Current Status:</strong> Module system working perfectly ‚úÖ<br>
                <strong>Content Loading:</strong> Adding all 12 modules + knowledge checks<br>
                <strong>Timeline:</strong> Full course ready soon
            </p>
        </div>

        <!-- Final Assessment (unlocked after all modules) -->
        <div class="module-container" id="final-assessment" style="display: none;">
            <div class="module-header locked">
                <div class="module-title">Final Assessment (20 Questions)</div>
                <div class="module-status">
                    <span class="module-icon">üéØ</span>
                    <span>Complete All Modules</span>
                </div>
            </div>
        </div>

    </div>

    <!-- Notification element -->
    <div class="notification" id="notification"></div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmModal">
        <div class="modal-content">
            <div class="modal-title">‚ö†Ô∏è Clear All Progress?</div>
            <div class="modal-text">
                This will permanently delete all your course progress, including completed modules and knowledge check answers. You'll start over from the beginning.
                <br><br>
                <strong>This action cannot be undone.</strong>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn cancel" onclick="hideConfirmModal()">Cancel</button>
                <button class="modal-btn confirm" onclick="clearProgress()">Clear Progress</button>
            </div>
        </div>
    </div>

    <!-- Image Zoom Overlay -->
    <div class="image-zoom-overlay" id="imageZoomOverlay" onclick="closeZoom()">
        <div class="zoom-hint">Click to close ‚Ä¢ ESC key ‚Ä¢ Scroll to zoom</div>
        <img id="zoomedImage" src="" alt="">
    </div>

    <script>
        // Course Progress Management
        let courseProgress = {
            currentModule: 1,
            completedModules: [],
            unlockedModules: [1],
            knowledgeCheckAnswers: {},
            scrollPositions: {},
            timeSpent: 0,
            lastSaved: null,
            startTime: Date.now()
        };

        // Load saved progress on page load
        window.addEventListener('load', function() {
            loadProgress();
            updateProgressDisplay();
            startAutoSave();
            trackTimeSpent();
            enableImageZoom();
        });

        // Enable zoom for all images
        function enableImageZoom() {
            const images = document.querySelectorAll('.figure-box img');
            images.forEach(img => {
                if (!img.onclick) {
                    img.onclick = () => zoomImage(img);
                    img.style.cursor = 'pointer';
                }
            });
            
            // Add click hints to figure boxes that don't have them
            const figureBoxes = document.querySelectorAll('.figure-box');
            figureBoxes.forEach(box => {
                if (!box.querySelector('.image-click-hint')) {
                    const hint = document.createElement('div');
                    hint.className = 'image-click-hint';
                    hint.textContent = 'üí° Click image to zoom';
                    box.appendChild(hint);
                }
            });
        }

        // Save/Load Functions
        function saveProgress() {
            courseProgress.lastSaved = new Date().toISOString();
            courseProgress.scrollPositions[courseProgress.currentModule] = window.scrollY;
            localStorage.setItem('pt-msk-001-progress', JSON.stringify(courseProgress));
            
            // Update save status immediately
            const saveStatus = document.getElementById('saveStatus');
            saveStatus.textContent = 'Saved just now';
            saveStatus.style.color = '#059669';
            
            // Reset color after 2 seconds
            setTimeout(() => {
                saveStatus.style.color = '#666';
            }, 2000);
            
            showNotification('üíæ Progress saved!');
        }

        function loadProgress() {
            const saved = localStorage.getItem('pt-msk-001-progress');
            if (saved) {
                courseProgress = { ...courseProgress, ...JSON.parse(saved) };
                
                // Update UI based on loaded progress
                courseProgress.unlockedModules.forEach(moduleNum => {
                    unlockModule(moduleNum, false);
                });
                
                courseProgress.completedModules.forEach(moduleNum => {
                    markModuleComplete(moduleNum);
                });

                // Update save status
                if (courseProgress.lastSaved) {
                    const timeDiff = Math.round((Date.now() - new Date(courseProgress.lastSaved)) / 60000);
                    document.getElementById('saveStatus').textContent = 
                        timeDiff < 1 ? 'Saved just now' : `Saved ${timeDiff} minutes ago`;
                }
            }
        }

        // Auto-save every 5 minutes
        function startAutoSave() {
            setInterval(() => {
                saveProgress();
            }, 300000); // 5 minutes
        }

        // Track time spent
        function trackTimeSpent() {
            setInterval(() => {
                courseProgress.timeSpent = Math.round((Date.now() - courseProgress.startTime) / 60000);
            }, 60000); // Every minute
        }

        // Module Management
        function toggleModule(moduleNum) {
            const moduleContainer = document.getElementById(`module-${moduleNum}`);
            const content = document.getElementById(`content-${moduleNum}`);
            const header = moduleContainer.querySelector('.module-header');
            
            if (header.classList.contains('locked')) {
                showNotification('‚ö†Ô∏è Complete previous modules first');
                return;
            }

            // Close all other modules
            document.querySelectorAll('.module-content').forEach(content => {
                content.classList.remove('active');
            });

            // Open this module
            content.classList.add('active');
            courseProgress.currentModule = moduleNum;
            updateProgressDisplay(); // Update progress when switching modules
            
            // Scroll to module
            moduleContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function unlockModule(moduleNum, showNotification = true) {
            const moduleContainer = document.getElementById(`module-${moduleNum}`);
            if (!moduleContainer) return;
            
            const header = moduleContainer.querySelector('.module-header');
            const status = header.querySelector('.module-status');
            
            header.classList.remove('locked');
            header.onclick = () => toggleModule(moduleNum);
            
            status.innerHTML = '<span class="module-icon">üîì</span><span>Ready to Start</span>';
            
            if (!courseProgress.unlockedModules.includes(moduleNum)) {
                courseProgress.unlockedModules.push(moduleNum);
            }
            
            if (showNotification) {
                showNotification(`üîì Module ${moduleNum} unlocked!`);
            }
            
            updateProgressDisplay(); // Ensure progress updates when unlocking
        }

        function markModuleComplete(moduleNum) {
            const moduleContainer = document.getElementById(`module-${moduleNum}`);
            if (!moduleContainer) return;
            
            const header = moduleContainer.querySelector('.module-header');
            const status = header.querySelector('.module-status');
            
            // Add visual feedback immediately
            header.classList.add('completed');
            status.innerHTML = '<span class="module-icon">‚úÖ</span><span>Completed</span>';
            
            // Update progress data
            if (!courseProgress.completedModules.includes(moduleNum)) {
                courseProgress.completedModules.push(moduleNum);
            }
            
            // Force UI update
            updateProgressDisplay();
        }

        function unlockNextModule(nextModuleNum) {
            unlockModule(nextModuleNum);
            saveProgress(); // Auto-save when unlocking next module
        }

        // Knowledge Check Functions
        function checkAnswer(moduleNum, correctAnswer) {
            const selectedOption = document.querySelector(`input[name="q${moduleNum}"]:checked`);
            const feedback = document.getElementById(`feedback-${moduleNum}`);
            const continueBtn = document.getElementById(`continue-${moduleNum}`);
            const checkBtn = event.target;
            
            if (!selectedOption) {
                showNotification('‚ö†Ô∏è Please select an answer');
                return;
            }

            const userAnswer = selectedOption.value;
            checkBtn.disabled = true;
            
            // Store the answer
            courseProgress.knowledgeCheckAnswers[`module${moduleNum}`] = {
                answer: userAnswer,
                correct: userAnswer === correctAnswer,
                timestamp: new Date().toISOString()
            };

            // Show visual feedback on options
            const options = document.querySelectorAll(`input[name="q${moduleNum}"]`);
            options.forEach(option => {
                const label = option.parentElement;
                if (option.value === correctAnswer) {
                    label.classList.add('correct');
                } else if (option.value === userAnswer && userAnswer !== correctAnswer) {
                    label.classList.add('incorrect');
                }
                option.disabled = true;
            });

            // Show feedback message
            if (userAnswer === correctAnswer) {
                feedback.className = 'feedback correct';
                feedback.textContent = '‚úÖ Excellent! You can now continue to the next module.';
                continueBtn.classList.add('show');
                markModuleComplete(moduleNum);
                updateProgressDisplay(); // Update progress immediately
                saveProgress(); // Auto-save on completion
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '‚ùå Incorrect. Please review the material and try again.';
                
                // Allow retry after 3 seconds
                setTimeout(() => {
                    checkBtn.disabled = false;
                    checkBtn.textContent = 'Try Again';
                    options.forEach(option => {
                        option.disabled = false;
                        option.parentElement.classList.remove('correct', 'incorrect');
                    });
                    feedback.style.display = 'none';
                }, 3000);
            }
        }

        // Progress Display
        function updateProgressDisplay() {
            const totalModules = 3; // Currently implemented modules
            const completedCount = courseProgress.completedModules.length;
            const progressPercent = Math.round((completedCount / totalModules) * 100);
            
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            
            const statusText = completedCount === 0 ? 
                'Ready to begin ‚Ä¢ 0 of 3 modules available' :
                `Module ${courseProgress.currentModule} ‚Ä¢ ${completedCount} of 3 modules completed (${progressPercent}%)`;
            
            document.getElementById('progressText').textContent = statusText;
        }

        // Notification System
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Auto-save on scroll (every 30 seconds of activity)
        let scrollSaveTimeout;
        window.addEventListener('scroll', function() {
            clearTimeout(scrollSaveTimeout);
            scrollSaveTimeout = setTimeout(() => {
                courseProgress.scrollPositions[courseProgress.currentModule] = window.scrollY;
                saveProgress();
            }, 30000);
        });

        // Save before page unload
        window.addEventListener('beforeunload', function() {
            saveProgress();
        });

        // Show message for modules not yet implemented
        function showMoreModulesMessage() {
            showNotification('üöß Modules 4-12 are being added! Check back soon for the complete course.');
        }

        // Clear Progress Functions
        function confirmClearProgress() {
            document.getElementById('confirmModal').classList.add('show');
        }

        function hideConfirmModal() {
            document.getElementById('confirmModal').classList.remove('show');
        }

        function clearProgress() {
            // Remove from localStorage
            localStorage.removeItem('pt-msk-001-progress');
            
            // Reset progress object to initial state
            courseProgress = {
                currentModule: 1,
                completedModules: [],
                unlockedModules: [1],
                knowledgeCheckAnswers: {},
                scrollPositions: {},
                timeSpent: 0,
                lastSaved: null,
                startTime: Date.now()
            };

            // Reset all UI elements
            resetUIToInitialState();
            
            // Hide modal
            hideConfirmModal();
            
            // Update displays
            updateProgressDisplay();
            document.getElementById('saveStatus').textContent = 'Never saved';
            
            // Show confirmation
            showNotification('üóëÔ∏è Progress cleared! Starting fresh.');
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function resetUIToInitialState() {
            // Reset all modules to locked state except Module 1
            for (let i = 1; i <= 3; i++) {
                const moduleContainer = document.getElementById(`module-${i}`);
                if (!moduleContainer) continue;
                
                const header = moduleContainer.querySelector('.module-header');
                const status = header.querySelector('.module-status');
                const content = document.getElementById(`content-${i}`);
                
                // Remove active content
                content.classList.remove('active');
                
                if (i === 1) {
                    // Module 1 stays unlocked
                    header.classList.remove('completed', 'locked');
                    header.onclick = () => toggleModule(1);
                    status.innerHTML = '<span class="module-icon">üîì</span><span>Ready to Start</span>';
                } else {
                    // Lock other modules
                    header.classList.remove('completed');
                    header.classList.add('locked');
                    header.onclick = () => toggleModule(i);
                    status.innerHTML = `<span class="module-icon">üîí</span><span>Complete Module ${i-1}</span>`;
                }
            }
            
            // Reset all knowledge check forms
            for (let i = 1; i <= 3; i++) {
                const feedback = document.getElementById(`feedback-${i}`);
                const continueBtn = document.getElementById(`continue-${i}`);
                const checkBtn = document.querySelector(`button[onclick="checkAnswer(${i},`)
                
                if (feedback) {
                    feedback.style.display = 'none';
                    feedback.className = 'feedback';
                }
                
                if (continueBtn) {
                    continueBtn.classList.remove('show');
                }
                
                // Reset radio buttons and styling
                const options = document.querySelectorAll(`input[name="q${i}"]`);
                options.forEach(option => {
                    option.checked = false;
                    option.disabled = false;
                    option.parentElement.classList.remove('correct', 'incorrect');
                });
                
                // Reset check answer button
                const checkButtons = document.querySelectorAll('.check-answer-btn');
                checkButtons.forEach(btn => {
                    btn.disabled = false;
                    btn.textContent = 'Check Answer';
                });
            }
        }

        // Close modal when clicking outside
        document.getElementById('confirmModal').addEventListener('click', function(e) {
            if (e.target === this) {
                hideConfirmModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                hideConfirmModal();
                closeZoom();
            }
        });

        // Logout function
        function logout() {
            // Clear course progress
            localStorage.removeItem('pt-msk-001-progress');
            
            // Clear any other user session data
            localStorage.removeItem('userSession');
            localStorage.removeItem('loginState');
            
            // Redirect to login page
            showNotification('üëã Logging out...');
            setTimeout(() => {
                window.location.href = '../login.html';
            }, 1000);
        }

        // Image Zoom Functions
        function zoomImage(img) {
            const overlay = document.getElementById('imageZoomOverlay');
            const zoomedImg = document.getElementById('zoomedImage');
            
            zoomedImg.src = img.src;
            zoomedImg.alt = img.alt;
            overlay.classList.add('show');
            
            // Prevent body scroll when zoomed
            document.body.style.overflow = 'hidden';
        }

        function closeZoom() {
            const overlay = document.getElementById('imageZoomOverlay');
            overlay.classList.remove('show');
            
            // Restore body scroll
            document.body.style.overflow = 'auto';
        }

        // Zoom with mouse wheel
        document.getElementById('zoomedImage').addEventListener('wheel', function(e) {
            e.preventDefault();
            const img = this;
            const currentScale = img.style.transform ? parseFloat(img.style.transform.match(/scale\(([\d.]+)\)/)?.[1] || 1) : 1;
            const scaleFactor = e.deltaY > 0 ? 0.9 : 1.1;
            const newScale = Math.min(Math.max(currentScale * scaleFactor, 0.5), 3);
            
            img.style.transform = `scale(${newScale})`;
        });
    </script>
</body>
</html>